const API='/backend/api';function setU(u){localStorage.setItem('user',JSON.stringify(u))}document.addEventListener('DOMContentLoaded',()=>{const l=document.getElementById('loginBtn');if(l){l.onclick=async()=>{const res=await fetch(API+'/auth/login.php',{method:'POST',body:JSON.stringify({email:email.value,password:password.value})});const d=await res.json();if(d.success){setU(d.user);location.href='index.html'}else alert(d.error||'Login failed')}} const r=document.getElementById('registerBtn');if(r){r.onclick=async()=>{const payload={name:name.value,email:email.value,phone:phone.value,password:password.value,referral_code:referral.value,invite_code:invite.value};const res=await fetch(API+'/auth/register.php',{method:'POST',body:JSON.stringify(payload)});const d=await res.json();if(d.success){alert('Welcome bonus $'+(d.welcome_bonus||0));location.href='index.html'}else alert(d.error||'Register failed')}} const t=document.getElementById('openTerms');if(t){t.onclick=()=>termsModal.style.display='block'; closeTerms.onclick=()=>termsModal.style.display='none';}})