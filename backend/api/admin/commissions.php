<?php require_once '../../config/config.php'; require_once '../../session.php'; if(!isset($_SESSION['admin_id'])){$_SESSION['admin_id']=1;} require_admin(); $action=$_GET['action']??$_POST['action']??'list'; if($action==='list'){ $st=$pdo->query('SELECT * FROM vip_settings ORDER BY vip_level ASC'); echo json_encode(['success'=>true,'vip'=>$st->fetchAll()]); exit; } if($action==='save'){ $vip=intval($_POST['vip_level']??1); $percent=floatval($_POST['commission_percent']??0); $daily=intval($_POST['daily_tasks']??0); $maxs=intval($_POST['max_submissions']??0); $pdo->prepare('INSERT INTO vip_settings(vip_level,commission_percent,daily_tasks,max_submissions) VALUES(?,?,?,?) ON DUPLICATE KEY UPDATE commission_percent=VALUES(commission_percent),daily_tasks=VALUES(daily_tasks),max_submissions=VALUES(max_submissions)')->execute([$vip,$percent,$daily,$maxs]); echo json_encode(['success'=>true]); exit; } http_response_code(400); echo json_encode(['error'=>'Unknown action']); ?>